<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="style.css">
	<!-- ボタンCSSの参照先 http://www.htmq.com/csskihon/004.shtml -->
	<style type="text/css">
		.square_btn{
			display: inline-block;
			padding: 0.5em 1em;
			text-decoration: none;
			background: #668ad8;/*ボタン色*/
			color: #FFF;
			border-bottom: solid 4px #627295;
			border-radius: 3px;
		}
		.square_btn:active {/*ボタンを押したとき*/
			-ms-transform: translateY(4px);
			-webkit-transform: translateY(4px);
			transform: translateY(4px);/*下に動く*/
			border-bottom: none;/*線を消す*/
		}

                .square_btn2{
			display: inline-block;
			padding: 0.5em 1em;
			text-decoration: none;
			background: #668ad8;/*ボタン色*/
			color: #FFF;
			border-bottom: solid 4px #627295;
			border-radius: 3px;
		}
		.square_btn2:active {/*ボタンを押したとき*/
			-ms-transform: translateY(4px);
			-webkit-transform: translateY(4px);
			transform: translateY(4px);/*下に動く*/
			border-bottom: none;/*線を消す*/
		}
	</style>
	<title>JavaScript gacha</title>
</head>
<body>
<h1>JavaScriptガチャ</h1>


<script>
var no_rare = 0;
var no_srare = 0;
var no_urare = 0;
function gacha_single(){
                var img = document.getElementById("card10");
		var number = Math.floor(100*Math.random());
		if( number < 85 ) {
                img.src = "002.JPG";
			no_rare++;
        	} else if( number < 98 ) {
			img.src = "003.JPG";
			no_srare++;
		} else {
                       img.src = "004.JPG";
                        alert("さぁ、最悪の始まりだ");
                        no_urare++;
                } 
}

function set_gatcha() {
	for( var i= 0; i<9; i++ ) {
		var id = ('0000000000' + i).slice(-2);
		var img = document.getElementById("card"+id);
		var number = Math.floor(100*Math.random());
		if( number < 85 ) {
			img.src = "005.JPG";
			no_rare++;
		} else if( number < 98) {
			img.src = "006.JPG";
			no_srare++;
		} else { alert("私の役目、果たしましょう"); 
                        img.src = "007.JPG";
                        no_urare++;
                } 
               
}
}
	

function gacha_ex(){
               var img =  document.getElementById("card09");
               var number = Math.floor(100*Math.random());
		if( number < 98 ) {
                        img.src = "006.JPG";
                        	no_srare++;
		} 
                  else {img.src = "007.JPG";
                        alert("私の役目、果たしましょう");
                        no_urare++;
                }    
}

function tatol(){
        var total = no_rare + no_srare + no_urare;
	document.getElementById("price").innerHTML = total*300+"円";
	document.getElementById("no_rare").innerHTML = no_rare+"枚（確率"+Math.round(no_rare/total*100*100)/100+"％）";
	document.getElementById("no_srare").innerHTML = no_srare+"枚（確率"+Math.round(no_srare/total*100*100)/100+"％）";
	document.getElementById("no_urare").innerHTML = no_urare+"枚（確率"+Math.round(no_urare/total*100*100)/100+"％）";
        
}

</script>

<table>ガチャシングル画面↓　　ガチャ十連画面↓
	<tr>    <td><img id="card10" src="unknown.png" width="150" height="200"></td>
                <td>                                                            </td>
		<td><img id="card00" src="unknown.png" width="150" height="200"></td>
		<td><img id="card01" src="unknown.png" width="150" height="200"></td>
		<td><img id="card02" src="unknown.png" width="150" height="200"></td>
		<td><img id="card03" src="unknown.png" width="150" height="200"></td>
		<td><img id="card04" src="unknown.png" width="150" height="200"></td>
	</tr>
	<tr>
                <td>                                                           </td>
　　　　　　　　<td>                                                           </td>
		<td><img id="card05" src="unknown.png" width="150" height="200"></td>
		<td><img id="card06" src="unknown.png" width="150" height="200"></td>
		<td><img id="card07" src="unknown.png" width="150" height="200"></td>
		<td><img id="card08" src="unknown.png" width="150" height="200"></td>
		<td><img id="card09" src="unknown.png" width="150" height="200"></td>
	</tr>
</table>

<div>ガチャシングル　<a href="#" class="square_btn2" onclick="gacha_single();tatol()">ガチャを引く！</a></div>
ガチャ十連(sr以上一枚確定)　<a href="#" class="square_btn" onclick="set_gatcha();gacha_ex();tatol()">ガチャを引く！</a>

<dl>
	<dt>現在の課金額</dt>
	<dd id="price">0円</dd>
	<dt>レアの枚数（設定確率は85％）</dt>
	<dd id="no_rare">0枚</dd>
	<dt>ＳＲの枚数（設定確率は13％,十連確定枠98%）</dt>
	<dd id="no_srare">0枚</dd>
	<dt>ＵＲの枚数（設定確率は2％、十連確定枠2%）</dt>
	<dd id="no_urare">0枚</dd>
        
         
</dl>

</body>
</html>

